sudo -u postgres psql -d djspamdata -c 'alter table quickstart_area add column $i_r double'
alter table quickstart_area add column maiz_r double;
update quickstart_area set maiz_r = maiz_h + maiz_l + maiz_s;
select maiz, maiz_i, maiz_r, maiz_h, maiz_l, maiz_s from quickstart_area limit 1;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do ; done

----------- add rainfed columns ----------------
for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "alter table quickstart_area add column ${i}_r double precision"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "alter table quickstart_yield add column ${i}_r double precision"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "alter table quickstart_harvested add column ${i}_r double precision"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "alter table quickstart_prod add column ${i}_r double precision"; done;

----------- calculate total rainfed -------------

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "update quickstart_harvested set ${i}_r = ${i}_h + ${i}_l + ${i}_s"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "update quickstart_area set ${i}_r = ${i}_h + ${i}_l + ${i}_s"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "update quickstart_prod set ${i}_r = ${i}_h + ${i}_l + ${i}_s"; done;

for j in AFG AGO ALB ARE ARG ARM ATG AUS AUT AZE BDI BEL BEN BFA BGD BGR BHR BIH BLR BLZ BOL BRA BRB BRN BTN BWA CAF CAN CHE CHL CHN CIV CMR COD COG COL CRI CUB CYP CZE DEU DJI DMA DNK DOM DZA ECU EGY ERI ESP EST ETH FIN FJI FRA GAB GBR GEO GHA GIN GLP GMB GNB GNQ GRC GRD GTM GUF GUY HND HRV HTI HUN IDN IND IRL IRN IRQ ISR ITA JAM JOR JPN KAZ KEN KGZ KHM KIR KNA KOR KWT LAO LBN LBR LBY LCA LKA LSO LTU LUX LVA MAR MDA MDG MDV MEX MKD MLI MLT MMR MNE MNG MOZ MRT MSR MTQ MUS MWI MYS NAM NCL NER NGA NIC NLD NOR NPL NZL OMN PAK PAN PER PHL PNG POL PRI PRK PRT PRY QAT ROU RUS RWA SAU SDN SEN SGP SLB SLE SLV SOM SRB STP SUR SVK SVN SWE SWZ SYC SYR TCD TGO THA TJK TKM TLS TTO TUN TUR TZA UGA UKR URY USA UZB VCT VEN VIR VNM VUT YEM ZAF ZMB ZWE; do for i in grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "update quickstart_prod set ${i}_r = ${i}_h + ${i}_l + ${i}_s where iso3 = '$j'"; done; done;

create index on quickstart_area(cell5m);
create index on quickstart_yield(cell5m);
create index on quickstart_prod(cell5m);
create index on quickstart_harvested(cell5m);

for j in AFG AGO ALB ARE ARG ARM ATG AUS AUT AZE BDI BEL BEN BFA BGD BGR BHR BIH BLR BLZ BOL BRA BRB BRN BTN BWA CAF CAN CHE CHL CHN CIV CMR COD COG COL CRI CUB CYP CZE DEU DJI DMA DNK DOM DZA ECU EGY ERI ESP EST ETH FIN FJI FRA GAB GBR GEO GHA GIN GLP GMB GNB GNQ GRC GRD GTM GUF GUY HND HRV HTI HUN IDN IND IRL IRN IRQ ISR ITA JAM JOR JPN KAZ KEN KGZ KHM KIR KNA KOR KWT LAO LBN LBR LBY LCA LKA LSO LTU LUX LVA MAR MDA MDG MDV MEX MKD MLI MLT MMR MNE MNG MOZ MRT MSR MTQ MUS MWI MYS NAM NCL NER NGA NIC NLD NOR NPL NZL OMN PAK PAN PER PHL PNG POL PRI PRK PRT PRY QAT ROU RUS RWA SAU SDN SEN SGP SLB SLE SLV SOM SRB STP SUR SVK SVN SWE SWZ SYC SYR TCD TGO THA TJK TKM TLS TTO TUN TUR TZA UGA UKR URY USA UZB VCT VEN VIR VNM VUT YEM ZAF ZMB ZWE; do for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest; do sudo -u postgres psql -d djspamdata -c "update quickstart_yield y set ${i}_r = (case when h.${i}_r = 0 then 0 else round((p.${i}_r::float / h.${i}_r::float * 1000)::numeric, 1) END) from quickstart_harvested h, quickstart_prod p where h.cell5m = y.cell5m and p.cell5m = y.cell5m and y.iso3 = '$j'"; done; done;

------------- add not null constraints ---------------------

# for i in quickstart_area quickstart_prod quickstart_harvested quickstart_yield

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "ALTER TABLE quickstart_yield ALTER COLUMN ${i} set not null"; done;

for i in cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "ALTER TABLE quickstart_prod ALTER COLUMN ${i} set not null"; done;

------------- update whea_r --------------

create index on quickstart_prod(cell5m, maiz_r);
create index on quickstart_harvested(cell5m, maiz_r);

update quickstart_yield y set whea_r = (case when h.whea_r = 0 then 0 else round((p.whea_r::float / h.whea_r::float * 1000)::numeric, 1) END) from quickstart_harvested h, quickstart_prod p where h.cell5m = y.cell5m and p.cell5m = y.cell5m

update quickstart_yield y set maiz_r = (case when h.maiz_r = 0 then 0 else round((p.maiz_r::float / h.maiz_r::float * 1000)::numeric, 1) END) from quickstart_harvested h, quickstart_prod p where h.cell5m = y.cell5m and p.cell5m = y.cell5m

drop index quickstart_prod_whea_r_idx;
drop index quickstart_harvested_whea_r_idx;

------------- tests --------------------
select * from quickstart_prod p, quickstart_harvested h where p.maiz != ( select h.maiz * y.maiz from quickstart_harvested h, quickstart_yield y where y.cell5m = h.cell5m) and p.cell5m = h.cell5m limit 2 

select p.iso3, p.cell5m, h.cell5m, y.cell5m, p.unit, h.unit, y.unit, p.maiz_i, h.maiz_i, y.maiz_i from quickstart_prod p
join quickstart_harvested h on h.cell5m = p.cell5m
join quickstart_yield y on y.cell5m = p.cell5m
where round((p.maiz_i / h.maiz_i)::numeric,1) <> y.maiz_i and p.maiz_i > 0 limit 20;

gdal_rasterize -a sorg_i -te -180 -90 180 90 -ts 4320 2160 -a_srs EPSG:4326 -a_nodata -9999 -co "COMPRESS=LZW" -l harvested_area_vector PG:"dbname=djspamdata user=postgres" /home/tmp/harvested_area/sorg_i.tiff

------------- create vector tables --------------------

create table harvested_area_vector as select g.cell5m, y.iso3, y.rec_type, y.unit, y.whea, y.rice, y.maiz, y.barl, y.pmil, y.smil, y.sorg, y.ocer, y.pota, y.swpo, y.yams, y.cass, y.orts, y.bean, y.chic, y.cowp, y.pige, y.lent, y.opul, y.soyb, y.grou, y.cnut, y.oilp, y.sunf, y.rape, y.sesa, y.ooil, y.sugc, y.sugb, y.cott, y.ofib, y.acof, y.rcof, y.coco, y.teas, y.toba, y.bana, y.plnt, y.trof, y.temf, y.vege, y.rest, y.whea_i, y.rice_i, y.maiz_i, y.barl_i, y.pmil_i, y.smil_i, y.sorg_i, y.ocer_i, y.pota_i, y.swpo_i, y.yams_i, y.cass_i, y.orts_i, y.bean_i, y.chic_i, y.cowp_i, y.pige_i, y.lent_i, y.opul_i, y.soyb_i, y.grou_i, y.cnut_i, y.oilp_i, y.sunf_i, y.rape_i, y.sesa_i, y.ooil_i, y.sugc_i, y.sugb_i, y.cott_i, y.ofib_i, y.acof_i, y.rcof_i, y.coco_i, y.teas_i, y.toba_i, y.bana_i, y.plnt_i, y.trof_i, y.temf_i, y.vege_i, y.rest_i, y.whea_r, y.rice_r, y.maiz_r, y.barl_r, y.pmil_r, y.smil_r, y.sorg_r, y.ocer_r, y.pota_r, y.swpo_r, y.yams_r, y.cass_r, y.orts_r, y.bean_r, y.chic_r, y.cowp_r, y.pige_r, y.lent_r, y.opul_r, y.soyb_r, y.grou_r, y.cnut_r, y.oilp_r, y.sunf_r, y.rape_r, y.sesa_r, y.ooil_r, y.sugc_r, y.sugb_r, y.cott_r, y.ofib_r, y.acof_r, y.rcof_r, y.coco_r, y.teas_r, y.toba_r, y.bana_r, y.plnt_r, y.trof_r, y.temf_r, y.vege_r, y.rest_r, g.wkb_geometry from quickstart_harvested y, hc_grid5m g where g.cell5m = y.cell5m;

create table prod_vector as select g.cell5m, y.iso3, y.rec_type, y.unit, y.whea, y.rice, y.maiz, y.barl, y.pmil, y.smil, y.sorg, y.ocer, y.pota, y.swpo, y.yams, y.cass, y.orts, y.bean, y.chic, y.cowp, y.pige, y.lent, y.opul, y.soyb, y.grou, y.cnut, y.oilp, y.sunf, y.rape, y.sesa, y.ooil, y.sugc, y.sugb, y.cott, y.ofib, y.acof, y.rcof, y.coco, y.teas, y.toba, y.bana, y.plnt, y.trof, y.temf, y.vege, y.rest, y.whea_i, y.rice_i, y.maiz_i, y.barl_i, y.pmil_i, y.smil_i, y.sorg_i, y.ocer_i, y.pota_i, y.swpo_i, y.yams_i, y.cass_i, y.orts_i, y.bean_i, y.chic_i, y.cowp_i, y.pige_i, y.lent_i, y.opul_i, y.soyb_i, y.grou_i, y.cnut_i, y.oilp_i, y.sunf_i, y.rape_i, y.sesa_i, y.ooil_i, y.sugc_i, y.sugb_i, y.cott_i, y.ofib_i, y.acof_i, y.rcof_i, y.coco_i, y.teas_i, y.toba_i, y.bana_i, y.plnt_i, y.trof_i, y.temf_i, y.vege_i, y.rest_i, y.whea_r, y.rice_r, y.maiz_r, y.barl_r, y.pmil_r, y.smil_r, y.sorg_r, y.ocer_r, y.pota_r, y.swpo_r, y.yams_r, y.cass_r, y.orts_r, y.bean_r, y.chic_r, y.cowp_r, y.pige_r, y.lent_r, y.opul_r, y.soyb_r, y.grou_r, y.cnut_r, y.oilp_r, y.sunf_r, y.rape_r, y.sesa_r, y.ooil_r, y.sugc_r, y.sugb_r, y.cott_r, y.ofib_r, y.acof_r, y.rcof_r, y.coco_r, y.teas_r, y.toba_r, y.bana_r, y.plnt_r, y.trof_r, y.temf_r, y.vege_r, y.rest_r, g.wkb_geometry from quickstart_prod y, hc_grid5m g where g.cell5m = y.cell5m;

create table physical_area_vector as select g.cell5m, y.iso3, y.rec_type, y.unit, y.whea, y.rice, y.maiz, y.barl, y.pmil, y.smil, y.sorg, y.ocer, y.pota, y.swpo, y.yams, y.cass, y.orts, y.bean, y.chic, y.cowp, y.pige, y.lent, y.opul, y.soyb, y.grou, y.cnut, y.oilp, y.sunf, y.rape, y.sesa, y.ooil, y.sugc, y.sugb, y.cott, y.ofib, y.acof, y.rcof, y.coco, y.teas, y.toba, y.bana, y.plnt, y.trof, y.temf, y.vege, y.rest, y.whea_i, y.rice_i, y.maiz_i, y.barl_i, y.pmil_i, y.smil_i, y.sorg_i, y.ocer_i, y.pota_i, y.swpo_i, y.yams_i, y.cass_i, y.orts_i, y.bean_i, y.chic_i, y.cowp_i, y.pige_i, y.lent_i, y.opul_i, y.soyb_i, y.grou_i, y.cnut_i, y.oilp_i, y.sunf_i, y.rape_i, y.sesa_i, y.ooil_i, y.sugc_i, y.sugb_i, y.cott_i, y.ofib_i, y.acof_i, y.rcof_i, y.coco_i, y.teas_i, y.toba_i, y.bana_i, y.plnt_i, y.trof_i, y.temf_i, y.vege_i, y.rest_i, y.whea_r, y.rice_r, y.maiz_r, y.barl_r, y.pmil_r, y.smil_r, y.sorg_r, y.ocer_r, y.pota_r, y.swpo_r, y.yams_r, y.cass_r, y.orts_r, y.bean_r, y.chic_r, y.cowp_r, y.pige_r, y.lent_r, y.opul_r, y.soyb_r, y.grou_r, y.cnut_r, y.oilp_r, y.sunf_r, y.rape_r, y.sesa_r, y.ooil_r, y.sugc_r, y.sugb_r, y.cott_r, y.ofib_r, y.acof_r, y.rcof_r, y.coco_r, y.teas_r, y.toba_r, y.bana_r, y.plnt_r, y.trof_r, y.temf_r, y.vege_r, y.rest_r, g.wkb_geometry from quickstart_area y, hc_grid5m g where g.cell5m = y.cell5m;

create table yield_vector as select g.cell5m, y.iso3, y.rec_type, y.unit, y.whea, y.rice, y.maiz, y.barl, y.pmil, y.smil, y.sorg, y.ocer, y.pota, y.swpo, y.yams, y.cass, y.orts, y.bean, y.chic, y.cowp, y.pige, y.lent, y.opul, y.soyb, y.grou, y.cnut, y.oilp, y.sunf, y.rape, y.sesa, y.ooil, y.sugc, y.sugb, y.cott, y.ofib, y.acof, y.rcof, y.coco, y.teas, y.toba, y.bana, y.plnt, y.trof, y.temf, y.vege, y.rest, y.whea_i, y.rice_i, y.maiz_i, y.barl_i, y.pmil_i, y.smil_i, y.sorg_i, y.ocer_i, y.pota_i, y.swpo_i, y.yams_i, y.cass_i, y.orts_i, y.bean_i, y.chic_i, y.cowp_i, y.pige_i, y.lent_i, y.opul_i, y.soyb_i, y.grou_i, y.cnut_i, y.oilp_i, y.sunf_i, y.rape_i, y.sesa_i, y.ooil_i, y.sugc_i, y.sugb_i, y.cott_i, y.ofib_i, y.acof_i, y.rcof_i, y.coco_i, y.teas_i, y.toba_i, y.bana_i, y.plnt_i, y.trof_i, y.temf_i, y.vege_i, y.rest_i, y.whea_r, y.rice_r, y.maiz_r, y.barl_r, y.pmil_r, y.smil_r, y.sorg_r, y.ocer_r, y.pota_r, y.swpo_r, y.yams_r, y.cass_r, y.orts_r, y.bean_r, y.chic_r, y.cowp_r, y.pige_r, y.lent_r, y.opul_r, y.soyb_r, y.grou_r, y.cnut_r, y.oilp_r, y.sunf_r, y.rape_r, y.sesa_r, y.ooil_r, y.sugc_r, y.sugb_r, y.cott_r, y.ofib_r, y.acof_r, y.rcof_r, y.coco_r, y.teas_r, y.toba_r, y.bana_r, y.plnt_r, y.trof_r, y.temf_r, y.vege_r, y.rest_r, g.wkb_geometry from quickstart_yield y, hc_grid5m g where g.cell5m = y.cell5m;

------------- create compressed geotiffs --------------

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do gdal_rasterize -a $i -te -180 -90 180 90 -ts 4320 2160 -a_srs EPSG:4326 -a_nodata -9999 -co "COMPRESS=LZW" -l harvested_area_vector PG:"dbname=djspamdata user=postgres" /home/tmp/tiff/quickstart_harvested/$i.tiff; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do gdal_rasterize -a $i -te -180 -90 180 90 -ts 4320 2160 -a_srs EPSG:4326 -a_nodata -9999 -co "COMPRESS=LZW" -l prod_vector PG:"dbname=djspamdata user=postgres" /home/tmp/tiff/quickstart_prod/$i.tiff; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do gdal_rasterize -a $i -te -180 -90 180 90 -ts 4320 2160 -a_srs EPSG:4326 -a_nodata -9999 -co "COMPRESS=LZW" -l physical_area_vector PG:"dbname=djspamdata user=postgres" /home/tmp/tiff/quickstart_area/$i.tiff; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do gdal_rasterize -a $i -te -180 -90 180 90 -ts 4320 2160 -a_srs EPSG:4326 -a_nodata -9999 -co "COMPRESS=LZW" -l yield_vector PG:"dbname=djspamdata user=postgres" /home/tmp/tiff/quickstart_yield/$i.tiff; done;

----------------- create shapefiles ------------------
cd /home/tmp/shp
sudo -u postgres ogr2ogr -f "ESRI Shapefile" spam2005_yield.shp PG:"dbname=djspamdata user=postgres" "yield_vector" 
sudo -u postgres ogr2ogr -f "ESRI Shapefile" spam2005_physical_area.shp PG:"dbname=djspamdata user=postgres" "physical_area_vector" 
sudo -u postgres ogr2ogr -f "ESRI Shapefile" spam2005_production.shp PG:"dbname=djspamdata user=postgres" "prod_vector" 
sudo -u postgres ogr2ogr -f "ESRI Shapefile" spam2005_harvested_area.shp PG:"dbname=djspamdata user=postgres" "harvested_area_vector" 

----------------- create NetCDF ----------------------
cd /home/tmp/tiff/folder - results go in /home/tmp/tiff/folder
for i in *.tiff; do gdal_translate -of netCDF -co COMPRESS=DEFLATE -co ZLEVEL=9 $i /home/tmp/nc/quickstart_area/$i.nc; done;
for i in *.tiff; do gdal_translate -of netCDF -co COMPRESS=DEFLATE -co ZLEVEL=9 $i /home/tmp/nc/quickstart_yield/$i.nc; done;
for i in *.tiff; do gdal_translate -of netCDF -co COMPRESS=DEFLATE -co ZLEVEL=9 $i /home/tmp/nc/quickstart_prod/$i.nc; done;
for i in *.tiff; do gdal_translate -of netCDF -co COMPRESS=DEFLATE -co ZLEVEL=9 $i /home/tmp/nc/quickstart_harvested/$i.nc; done;

----------------- create PNGs -----------------------

python2.7 spam_nc2png_v2.py

----------------- compress/uncompress ----------------
chcon unconfined_u:object_r:httpd_sys_content_t:s0 /home/www/vhosts/spam05.harvestchoice.org -R
# zip all
for i in *.tiff; do gzip $i; done;
# unzip all
for i in *.gz; do gunzip $i; done;
tar cfz spam2005_yield.tgz spam2005_yield.*

----------------- continued 11/20/2014 ---------------
----------------- rename geotiff files ----------------

for i in *.gz; do gunzip $i; done;

declare -A crops=( ["acof"]="coffee_arabica" ["bana"]="banana" ["barl"]="barley" ["bean"]="bean" ["cass"]="cassava" ["chic"]="chickpea" ["cnut"]="coconut" ["coco"]="cocoa" ["cott"]="cotton" ["cowp"]="cowpea" ["grou"]="groundnut" ["lent"]="lentil" ["maiz"]="maize" ["ocer"]="other_cereals" ["ofib"]="other_fibers" ["oilp"]="oil_palm" ["ooil"]="other_oil_crops" ["opul"]="other_pulses" ["orts"]="other_roots_and_tubers" ["pige"]="pigeonpea" ["plnt"]="plantain" ["pmil"]="pearl_millet" ["pota"]="potato" ["rape"]="rapeseed" ["rcof"]="coffee_robusta" ["rest"]="rest_of_crops" ["rice"]="rice" ["sesa"]="sesame_seed" ["smil"]="small_millet" ["sorg"]="sorghum" ["soyb"]="soybean" ["sugb"]="sugar_beet" ["sugc"]="sugar_cane" ["sunf"]="sunflower" ["swpo"]="sweet_potato" ["teas"]="tea" ["temf"]="temperate_fruit" ["toba"]="tobacco" ["trof"]="tropical_fruit" ["vege"]="vegetable" ["whea"]="wheat" ["yams"]="yam" )

for i in *.tiff; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_harvested-area_${crops["${i:0:4}"]}$v.tiff; done;

for i in *.tiff; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_physical-area_${crops["${i:0:4}"]}$v.tiff; done;

for i in *.tiff; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_production_${crops["${i:0:4}"]}$v.tiff; done;

for i in *.tiff; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_yield_${crops["${i:0:4}"]}$v.tiff; done;

----------------- rename nc files ----------------

for i in *.nc; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_harvested-area_${crops["${i:0:4}"]}$v.nc; done;

for i in *.nc; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_physical-area_${crops["${i:0:4}"]}$v.nc; done;

for i in *.nc; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_production_${crops["${i:0:4}"]}$v.nc; done;

for i in *.nc; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_yield_${crops["${i:0:4}"]}$v.nc; done;

---------------- generate csv files ---------------
# fields: cell5m, value, unit, rec_type, iso3, prod_level, alloc_key

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "COPY (SELECT x, y, ${i}, unit, cell5m, rec_type, iso3, prod_level, alloc_key FROM quickstart_harvested) TO '/home/tmp/csv/harvested-area/${i}.csv' with csv header"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "COPY (SELECT x, y, ${i}, unit, cell5m, rec_type, iso3, prod_level, alloc_key FROM quickstart_area) TO '/home/tmp/csv/physical-area/${i}.csv' with csv header"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "COPY (SELECT x, y, ${i}, unit, cell5m, rec_type, iso3, prod_level, alloc_key FROM quickstart_yield) TO '/home/tmp/csv/yield/${i}.csv' with csv header"; done;

for i in whea rice maiz barl pmil smil sorg ocer pota swpo yams cass orts bean chic cowp pige lent opul soyb grou cnut oilp sunf rape sesa ooil sugc sugb cott ofib acof rcof coco teas toba bana plnt trof temf vege rest whea_i rice_i maiz_i barl_i pmil_i smil_i sorg_i ocer_i pota_i swpo_i yams_i cass_i orts_i bean_i chic_i cowp_i pige_i lent_i opul_i soyb_i grou_i cnut_i oilp_i sunf_i rape_i sesa_i ooil_i sugc_i sugb_i cott_i ofib_i acof_i rcof_i coco_i teas_i toba_i bana_i plnt_i trof_i temf_i vege_i rest_i whea_r rice_r maiz_r barl_r pmil_r smil_r sorg_r ocer_r pota_r swpo_r yams_r cass_r orts_r bean_r chic_r cowp_r pige_r lent_r opul_r soyb_r grou_r cnut_r oilp_r sunf_r rape_r sesa_r ooil_r sugc_r sugb_r cott_r ofib_r acof_r rcof_r coco_r teas_r toba_r bana_r plnt_r trof_r temf_r vege_r rest_r; do sudo -u postgres psql -d djspamdata -c "COPY (SELECT x, y, ${i}, unit, cell5m, rec_type, iso3, prod_level, alloc_key FROM quickstart_prod) TO '/home/tmp/csv/production/${i}.csv' with csv header"; done;

---------

declare -A crops=( ["acof"]="coffee_arabica" ["bana"]="banana" ["barl"]="barley" ["bean"]="bean" ["cass"]="cassava" ["chic"]="chickpea" ["cnut"]="coconut" ["coco"]="cocoa" ["cott"]="cotton" ["cowp"]="cowpea" ["grou"]="groundnut" ["lent"]="lentil" ["maiz"]="maize" ["ocer"]="other_cereals" ["ofib"]="other_fibers" ["oilp"]="oil_palm" ["ooil"]="other_oil_crops" ["opul"]="other_pulses" ["orts"]="other_roots_and_tubers" ["pige"]="pigeonpea" ["plnt"]="plantain" ["pmil"]="pearl_millet" ["pota"]="potato" ["rape"]="rapeseed" ["rcof"]="coffee_robusta" ["rest"]="rest_of_crops" ["rice"]="rice" ["sesa"]="sesame_seed" ["smil"]="small_millet" ["sorg"]="sorghum" ["soyb"]="soybean" ["sugb"]="sugar_beet" ["sugc"]="sugar_cane" ["sunf"]="sunflower" ["swpo"]="sweet_potato" ["teas"]="tea" ["temf"]="temperate_fruit" ["toba"]="tobacco" ["trof"]="tropical_fruit" ["vege"]="vegetable" ["whea"]="wheat" ["yams"]="yam" )

for i in *.csv; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_harvested-area_${crops["${i:0:4}"]}$v.csv; done;

for i in *.csv; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_physical-area_${crops["${i:0:4}"]}$v.csv; done;

for i in *.csv; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_production_${crops["${i:0:4}"]}$v.csv; done;

for i in *.csv; do if [[ $i = *_r* ]] ; then v='_rainfed'; elif [[ $i = *_i* ]] ; then v='_irrigated'; else v='_total'; fi; mv $i spam2005v1r0_yield_${crops["${i:0:4}"]}$v.csv; done;

for i in *.csv; do gzip $i; done;

---------------- generate full archive ------------

cd /home/www/vhosts/spam05.harvestchoice.org/v1r0/zip/harvested-area
for i in spam2005v1r0_harvested-area_banana_irrigated spam2005v1r0_harvested-area_banana_rainfed spam2005v1r0_harvested-area_banana_total spam2005v1r0_harvested-area_barley_irrigated spam2005v1r0_harvested-area_barley_rainfed spam2005v1r0_harvested-area_barley_total spam2005v1r0_harvested-area_bean_irrigated spam2005v1r0_harvested-area_bean_rainfed spam2005v1r0_harvested-area_bean_total spam2005v1r0_harvested-area_cassava_irrigated spam2005v1r0_harvested-area_cassava_rainfed spam2005v1r0_harvested-area_cassava_total spam2005v1r0_harvested-area_chickpea_irrigated spam2005v1r0_harvested-area_chickpea_rainfed spam2005v1r0_harvested-area_chickpea_total spam2005v1r0_harvested-area_cocoa_irrigated spam2005v1r0_harvested-area_cocoa_rainfed spam2005v1r0_harvested-area_cocoa_total spam2005v1r0_harvested-area_coconut_irrigated spam2005v1r0_harvested-area_coconut_rainfed spam2005v1r0_harvested-area_coconut_total spam2005v1r0_harvested-area_coffee_arabica_irrigated spam2005v1r0_harvested-area_coffee_arabica_rainfed spam2005v1r0_harvested-area_coffee_arabica_total spam2005v1r0_harvested-area_coffee_robusta_irrigated spam2005v1r0_harvested-area_coffee_robusta_rainfed spam2005v1r0_harvested-area_coffee_robusta_total spam2005v1r0_harvested-area_cotton_irrigated spam2005v1r0_harvested-area_cotton_rainfed spam2005v1r0_harvested-area_cotton_total spam2005v1r0_harvested-area_cowpea_irrigated spam2005v1r0_harvested-area_cowpea_rainfed spam2005v1r0_harvested-area_cowpea_total spam2005v1r0_harvested-area_groundnut_irrigated spam2005v1r0_harvested-area_groundnut_rainfed spam2005v1r0_harvested-area_groundnut_total spam2005v1r0_harvested-area_lentil_irrigated spam2005v1r0_harvested-area_lentil_rainfed spam2005v1r0_harvested-area_lentil_total spam2005v1r0_harvested-area_maize_irrigated spam2005v1r0_harvested-area_maize_rainfed spam2005v1r0_harvested-area_maize_total spam2005v1r0_harvested-area_oil_palm_irrigated spam2005v1r0_harvested-area_oil_palm_rainfed spam2005v1r0_harvested-area_oil_palm_total spam2005v1r0_harvested-area_other_cereals_irrigated spam2005v1r0_harvested-area_other_cereals_rainfed spam2005v1r0_harvested-area_other_cereals_total spam2005v1r0_harvested-area_other_fibers_irrigated spam2005v1r0_harvested-area_other_fibers_rainfed spam2005v1r0_harvested-area_other_fibers_total spam2005v1r0_harvested-area_other_oil_crops_irrigated spam2005v1r0_harvested-area_other_oil_crops_rainfed spam2005v1r0_harvested-area_other_oil_crops_total spam2005v1r0_harvested-area_other_pulses_irrigated spam2005v1r0_harvested-area_other_pulses_rainfed spam2005v1r0_harvested-area_other_pulses_total spam2005v1r0_harvested-area_other_roots_and_tubers_irrigated spam2005v1r0_harvested-area_other_roots_and_tubers_rainfed spam2005v1r0_harvested-area_other_roots_and_tubers_total spam2005v1r0_harvested-area_pearl_millet_irrigated spam2005v1r0_harvested-area_pearl_millet_rainfed spam2005v1r0_harvested-area_pearl_millet_total spam2005v1r0_harvested-area_pigeonpea_irrigated spam2005v1r0_harvested-area_pigeonpea_rainfed spam2005v1r0_harvested-area_pigeonpea_total spam2005v1r0_harvested-area_plantain_irrigated spam2005v1r0_harvested-area_plantain_rainfed spam2005v1r0_harvested-area_plantain_total spam2005v1r0_harvested-area_potato_irrigated spam2005v1r0_harvested-area_potato_rainfed spam2005v1r0_harvested-area_potato_total spam2005v1r0_harvested-area_rapeseed_irrigated spam2005v1r0_harvested-area_rapeseed_rainfed spam2005v1r0_harvested-area_rapeseed_total spam2005v1r0_harvested-area_rest_of_crops_irrigated spam2005v1r0_harvested-area_rest_of_crops_rainfed spam2005v1r0_harvested-area_rest_of_crops_total spam2005v1r0_harvested-area_rice_irrigated spam2005v1r0_harvested-area_rice_rainfed spam2005v1r0_harvested-area_rice_total spam2005v1r0_harvested-area_sesame_seed_irrigated spam2005v1r0_harvested-area_sesame_seed_rainfed spam2005v1r0_harvested-area_sesame_seed_total spam2005v1r0_harvested-area_small_millet_irrigated spam2005v1r0_harvested-area_small_millet_rainfed spam2005v1r0_harvested-area_small_millet_total spam2005v1r0_harvested-area_sorghum_irrigated spam2005v1r0_harvested-area_sorghum_rainfed spam2005v1r0_harvested-area_sorghum_total spam2005v1r0_harvested-area_soybean_irrigated spam2005v1r0_harvested-area_soybean_rainfed spam2005v1r0_harvested-area_soybean_total spam2005v1r0_harvested-area_sugar_beet_irrigated spam2005v1r0_harvested-area_sugar_beet_rainfed spam2005v1r0_harvested-area_sugar_beet_total spam2005v1r0_harvested-area_sugar_cane_irrigated spam2005v1r0_harvested-area_sugar_cane_rainfed spam2005v1r0_harvested-area_sugar_cane_total spam2005v1r0_harvested-area_sunflower_irrigated spam2005v1r0_harvested-area_sunflower_rainfed spam2005v1r0_harvested-area_sunflower_total spam2005v1r0_harvested-area_sweet_potato_irrigated spam2005v1r0_harvested-area_sweet_potato_rainfed spam2005v1r0_harvested-area_sweet_potato_total spam2005v1r0_harvested-area_tea_irrigated spam2005v1r0_harvested-area_tea_rainfed spam2005v1r0_harvested-area_tea_total spam2005v1r0_harvested-area_temperate_fruit_irrigated spam2005v1r0_harvested-area_temperate_fruit_rainfed spam2005v1r0_harvested-area_temperate_fruit_total spam2005v1r0_harvested-area_tobacco_irrigated spam2005v1r0_harvested-area_tobacco_rainfed spam2005v1r0_harvested-area_tobacco_total spam2005v1r0_harvested-area_tropical_fruit_irrigated spam2005v1r0_harvested-area_tropical_fruit_rainfed spam2005v1r0_harvested-area_tropical_fruit_total spam2005v1r0_harvested-area_vegetable_irrigated spam2005v1r0_harvested-area_vegetable_rainfed spam2005v1r0_harvested-area_vegetable_total spam2005v1r0_harvested-area_wheat_irrigated spam2005v1r0_harvested-area_wheat_rainfed spam2005v1r0_harvested-area_wheat_total spam2005v1r0_harvested-area_yam_irrigated spam2005v1r0_harvested-area_yam_rainfed spam2005v1r0_harvested-area_yam_total; do tar cfz $i.tgz ../../csv/harvested-area/$i.csv.gz ../../tiff/harvested-area/$i.tiff ../../png/harvested-area/$i.png ../../nc/harvested-area/$i.nc; done; 

cd /home/www/vhosts/spam05.harvestchoice.org/v1r0/zip/physical-area
for i in spam2005v1r0_physical-area_banana_irrigated spam2005v1r0_physical-area_banana_rainfed spam2005v1r0_physical-area_banana_total spam2005v1r0_physical-area_barley_irrigated spam2005v1r0_physical-area_barley_rainfed spam2005v1r0_physical-area_barley_total spam2005v1r0_physical-area_bean_irrigated spam2005v1r0_physical-area_bean_rainfed spam2005v1r0_physical-area_bean_total spam2005v1r0_physical-area_cassava_irrigated spam2005v1r0_physical-area_cassava_rainfed spam2005v1r0_physical-area_cassava_total spam2005v1r0_physical-area_chickpea_irrigated spam2005v1r0_physical-area_chickpea_rainfed spam2005v1r0_physical-area_chickpea_total spam2005v1r0_physical-area_cocoa_irrigated spam2005v1r0_physical-area_cocoa_rainfed spam2005v1r0_physical-area_cocoa_total spam2005v1r0_physical-area_coconut_irrigated spam2005v1r0_physical-area_coconut_rainfed spam2005v1r0_physical-area_coconut_total spam2005v1r0_physical-area_coffee_arabica_irrigated spam2005v1r0_physical-area_coffee_arabica_rainfed spam2005v1r0_physical-area_coffee_arabica_total spam2005v1r0_physical-area_coffee_robusta_irrigated spam2005v1r0_physical-area_coffee_robusta_rainfed spam2005v1r0_physical-area_coffee_robusta_total spam2005v1r0_physical-area_cotton_irrigated spam2005v1r0_physical-area_cotton_rainfed spam2005v1r0_physical-area_cotton_total spam2005v1r0_physical-area_cowpea_irrigated spam2005v1r0_physical-area_cowpea_rainfed spam2005v1r0_physical-area_cowpea_total spam2005v1r0_physical-area_groundnut_irrigated spam2005v1r0_physical-area_groundnut_rainfed spam2005v1r0_physical-area_groundnut_total spam2005v1r0_physical-area_lentil_irrigated spam2005v1r0_physical-area_lentil_rainfed spam2005v1r0_physical-area_lentil_total spam2005v1r0_physical-area_maize_irrigated spam2005v1r0_physical-area_maize_rainfed spam2005v1r0_physical-area_maize_total spam2005v1r0_physical-area_oil_palm_irrigated spam2005v1r0_physical-area_oil_palm_rainfed spam2005v1r0_physical-area_oil_palm_total spam2005v1r0_physical-area_other_cereals_irrigated spam2005v1r0_physical-area_other_cereals_rainfed spam2005v1r0_physical-area_other_cereals_total spam2005v1r0_physical-area_other_fibers_irrigated spam2005v1r0_physical-area_other_fibers_rainfed spam2005v1r0_physical-area_other_fibers_total spam2005v1r0_physical-area_other_oil_crops_irrigated spam2005v1r0_physical-area_other_oil_crops_rainfed spam2005v1r0_physical-area_other_oil_crops_total spam2005v1r0_physical-area_other_pulses_irrigated spam2005v1r0_physical-area_other_pulses_rainfed spam2005v1r0_physical-area_other_pulses_total spam2005v1r0_physical-area_other_roots_and_tubers_irrigated spam2005v1r0_physical-area_other_roots_and_tubers_rainfed spam2005v1r0_physical-area_other_roots_and_tubers_total spam2005v1r0_physical-area_pearl_millet_irrigated spam2005v1r0_physical-area_pearl_millet_rainfed spam2005v1r0_physical-area_pearl_millet_total spam2005v1r0_physical-area_pigeonpea_irrigated spam2005v1r0_physical-area_pigeonpea_rainfed spam2005v1r0_physical-area_pigeonpea_total spam2005v1r0_physical-area_plantain_irrigated spam2005v1r0_physical-area_plantain_rainfed spam2005v1r0_physical-area_plantain_total spam2005v1r0_physical-area_potato_irrigated spam2005v1r0_physical-area_potato_rainfed spam2005v1r0_physical-area_potato_total spam2005v1r0_physical-area_rapeseed_irrigated spam2005v1r0_physical-area_rapeseed_rainfed spam2005v1r0_physical-area_rapeseed_total spam2005v1r0_physical-area_rest_of_crops_irrigated spam2005v1r0_physical-area_rest_of_crops_rainfed spam2005v1r0_physical-area_rest_of_crops_total spam2005v1r0_physical-area_rice_irrigated spam2005v1r0_physical-area_rice_rainfed spam2005v1r0_physical-area_rice_total spam2005v1r0_physical-area_sesame_seed_irrigated spam2005v1r0_physical-area_sesame_seed_rainfed spam2005v1r0_physical-area_sesame_seed_total spam2005v1r0_physical-area_small_millet_irrigated spam2005v1r0_physical-area_small_millet_rainfed spam2005v1r0_physical-area_small_millet_total spam2005v1r0_physical-area_sorghum_irrigated spam2005v1r0_physical-area_sorghum_rainfed spam2005v1r0_physical-area_sorghum_total spam2005v1r0_physical-area_soybean_irrigated spam2005v1r0_physical-area_soybean_rainfed spam2005v1r0_physical-area_soybean_total spam2005v1r0_physical-area_sugar_beet_irrigated spam2005v1r0_physical-area_sugar_beet_rainfed spam2005v1r0_physical-area_sugar_beet_total spam2005v1r0_physical-area_sugar_cane_irrigated spam2005v1r0_physical-area_sugar_cane_rainfed spam2005v1r0_physical-area_sugar_cane_total spam2005v1r0_physical-area_sunflower_irrigated spam2005v1r0_physical-area_sunflower_rainfed spam2005v1r0_physical-area_sunflower_total spam2005v1r0_physical-area_sweet_potato_irrigated spam2005v1r0_physical-area_sweet_potato_rainfed spam2005v1r0_physical-area_sweet_potato_total spam2005v1r0_physical-area_tea_irrigated spam2005v1r0_physical-area_tea_rainfed spam2005v1r0_physical-area_tea_total spam2005v1r0_physical-area_temperate_fruit_irrigated spam2005v1r0_physical-area_temperate_fruit_rainfed spam2005v1r0_physical-area_temperate_fruit_total spam2005v1r0_physical-area_tobacco_irrigated spam2005v1r0_physical-area_tobacco_rainfed spam2005v1r0_physical-area_tobacco_total spam2005v1r0_physical-area_tropical_fruit_irrigated spam2005v1r0_physical-area_tropical_fruit_rainfed spam2005v1r0_physical-area_tropical_fruit_total spam2005v1r0_physical-area_vegetable_irrigated spam2005v1r0_physical-area_vegetable_rainfed spam2005v1r0_physical-area_vegetable_total spam2005v1r0_physical-area_wheat_irrigated spam2005v1r0_physical-area_wheat_rainfed spam2005v1r0_physical-area_wheat_total spam2005v1r0_physical-area_yam_irrigated spam2005v1r0_physical-area_yam_rainfed spam2005v1r0_physical-area_yam_total; do tar cfz $i.tgz ../../csv/physical-area/$i.csv.gz ../../tiff/physical-area/$i.tiff ../../png/physical-area/$i.png ../../nc/physical-area/$i.nc; done; 

cd /home/www/vhosts/spam05.harvestchoice.org/v1r0/zip/yield
for i in spam2005v1r0_yield_banana_irrigated spam2005v1r0_yield_banana_rainfed spam2005v1r0_yield_banana_total spam2005v1r0_yield_barley_irrigated spam2005v1r0_yield_barley_rainfed spam2005v1r0_yield_barley_total spam2005v1r0_yield_bean_irrigated spam2005v1r0_yield_bean_rainfed spam2005v1r0_yield_bean_total spam2005v1r0_yield_cassava_irrigated spam2005v1r0_yield_cassava_rainfed spam2005v1r0_yield_cassava_total spam2005v1r0_yield_chickpea_irrigated spam2005v1r0_yield_chickpea_rainfed spam2005v1r0_yield_chickpea_total spam2005v1r0_yield_cocoa_irrigated spam2005v1r0_yield_cocoa_rainfed spam2005v1r0_yield_cocoa_total spam2005v1r0_yield_coconut_irrigated spam2005v1r0_yield_coconut_rainfed spam2005v1r0_yield_coconut_total spam2005v1r0_yield_coffee_arabica_irrigated spam2005v1r0_yield_coffee_arabica_rainfed spam2005v1r0_yield_coffee_arabica_total spam2005v1r0_yield_coffee_robusta_irrigated spam2005v1r0_yield_coffee_robusta_rainfed spam2005v1r0_yield_coffee_robusta_total spam2005v1r0_yield_cotton_irrigated spam2005v1r0_yield_cotton_rainfed spam2005v1r0_yield_cotton_total spam2005v1r0_yield_cowpea_irrigated spam2005v1r0_yield_cowpea_rainfed spam2005v1r0_yield_cowpea_total spam2005v1r0_yield_groundnut_irrigated spam2005v1r0_yield_groundnut_rainfed spam2005v1r0_yield_groundnut_total spam2005v1r0_yield_lentil_irrigated spam2005v1r0_yield_lentil_rainfed spam2005v1r0_yield_lentil_total spam2005v1r0_yield_maize_irrigated spam2005v1r0_yield_maize_rainfed spam2005v1r0_yield_maize_total spam2005v1r0_yield_oil_palm_irrigated spam2005v1r0_yield_oil_palm_rainfed spam2005v1r0_yield_oil_palm_total spam2005v1r0_yield_other_cereals_irrigated spam2005v1r0_yield_other_cereals_rainfed spam2005v1r0_yield_other_cereals_total spam2005v1r0_yield_other_fibers_irrigated spam2005v1r0_yield_other_fibers_rainfed spam2005v1r0_yield_other_fibers_total spam2005v1r0_yield_other_oil_crops_irrigated spam2005v1r0_yield_other_oil_crops_rainfed spam2005v1r0_yield_other_oil_crops_total spam2005v1r0_yield_other_pulses_irrigated spam2005v1r0_yield_other_pulses_rainfed spam2005v1r0_yield_other_pulses_total spam2005v1r0_yield_other_roots_and_tubers_irrigated spam2005v1r0_yield_other_roots_and_tubers_rainfed spam2005v1r0_yield_other_roots_and_tubers_total spam2005v1r0_yield_pearl_millet_irrigated spam2005v1r0_yield_pearl_millet_rainfed spam2005v1r0_yield_pearl_millet_total spam2005v1r0_yield_pigeonpea_irrigated spam2005v1r0_yield_pigeonpea_rainfed spam2005v1r0_yield_pigeonpea_total spam2005v1r0_yield_plantain_irrigated spam2005v1r0_yield_plantain_rainfed spam2005v1r0_yield_plantain_total spam2005v1r0_yield_potato_irrigated spam2005v1r0_yield_potato_rainfed spam2005v1r0_yield_potato_total spam2005v1r0_yield_rapeseed_irrigated spam2005v1r0_yield_rapeseed_rainfed spam2005v1r0_yield_rapeseed_total spam2005v1r0_yield_rest_of_crops_irrigated spam2005v1r0_yield_rest_of_crops_rainfed spam2005v1r0_yield_rest_of_crops_total spam2005v1r0_yield_rice_irrigated spam2005v1r0_yield_rice_rainfed spam2005v1r0_yield_rice_total spam2005v1r0_yield_sesame_seed_irrigated spam2005v1r0_yield_sesame_seed_rainfed spam2005v1r0_yield_sesame_seed_total spam2005v1r0_yield_small_millet_irrigated spam2005v1r0_yield_small_millet_rainfed spam2005v1r0_yield_small_millet_total spam2005v1r0_yield_sorghum_irrigated spam2005v1r0_yield_sorghum_rainfed spam2005v1r0_yield_sorghum_total spam2005v1r0_yield_soybean_irrigated spam2005v1r0_yield_soybean_rainfed spam2005v1r0_yield_soybean_total spam2005v1r0_yield_sugar_beet_irrigated spam2005v1r0_yield_sugar_beet_rainfed spam2005v1r0_yield_sugar_beet_total spam2005v1r0_yield_sugar_cane_irrigated spam2005v1r0_yield_sugar_cane_rainfed spam2005v1r0_yield_sugar_cane_total spam2005v1r0_yield_sunflower_irrigated spam2005v1r0_yield_sunflower_rainfed spam2005v1r0_yield_sunflower_total spam2005v1r0_yield_sweet_potato_irrigated spam2005v1r0_yield_sweet_potato_rainfed spam2005v1r0_yield_sweet_potato_total spam2005v1r0_yield_tea_irrigated spam2005v1r0_yield_tea_rainfed spam2005v1r0_yield_tea_total spam2005v1r0_yield_temperate_fruit_irrigated spam2005v1r0_yield_temperate_fruit_rainfed spam2005v1r0_yield_temperate_fruit_total spam2005v1r0_yield_tobacco_irrigated spam2005v1r0_yield_tobacco_rainfed spam2005v1r0_yield_tobacco_total spam2005v1r0_yield_tropical_fruit_irrigated spam2005v1r0_yield_tropical_fruit_rainfed spam2005v1r0_yield_tropical_fruit_total spam2005v1r0_yield_vegetable_irrigated spam2005v1r0_yield_vegetable_rainfed spam2005v1r0_yield_vegetable_total spam2005v1r0_yield_wheat_irrigated spam2005v1r0_yield_wheat_rainfed spam2005v1r0_yield_wheat_total spam2005v1r0_yield_yam_irrigated spam2005v1r0_yield_yam_rainfed spam2005v1r0_yield_yam_total; do tar cfz $i.tgz ../../csv/yield/$i.csv.gz ../../tiff/yield/$i.tiff ../../png/yield/$i.png ../../nc/yield/$i.nc; done; 

cd /home/www/vhosts/spam05.harvestchoice.org/v1r0/zip/production
for i in spam2005v1r0_production_banana_irrigated spam2005v1r0_production_banana_rainfed spam2005v1r0_production_banana_total spam2005v1r0_production_barley_irrigated spam2005v1r0_production_barley_rainfed spam2005v1r0_production_barley_total spam2005v1r0_production_bean_irrigated spam2005v1r0_production_bean_rainfed spam2005v1r0_production_bean_total spam2005v1r0_production_cassava_irrigated spam2005v1r0_production_cassava_rainfed spam2005v1r0_production_cassava_total spam2005v1r0_production_chickpea_irrigated spam2005v1r0_production_chickpea_rainfed spam2005v1r0_production_chickpea_total spam2005v1r0_production_cocoa_irrigated spam2005v1r0_production_cocoa_rainfed spam2005v1r0_production_cocoa_total spam2005v1r0_production_coconut_irrigated spam2005v1r0_production_coconut_rainfed spam2005v1r0_production_coconut_total spam2005v1r0_production_coffee_arabica_irrigated spam2005v1r0_production_coffee_arabica_rainfed spam2005v1r0_production_coffee_arabica_total spam2005v1r0_production_coffee_robusta_irrigated spam2005v1r0_production_coffee_robusta_rainfed spam2005v1r0_production_coffee_robusta_total spam2005v1r0_production_cotton_irrigated spam2005v1r0_production_cotton_rainfed spam2005v1r0_production_cotton_total spam2005v1r0_production_cowpea_irrigated spam2005v1r0_production_cowpea_rainfed spam2005v1r0_production_cowpea_total spam2005v1r0_production_groundnut_irrigated spam2005v1r0_production_groundnut_rainfed spam2005v1r0_production_groundnut_total spam2005v1r0_production_lentil_irrigated spam2005v1r0_production_lentil_rainfed spam2005v1r0_production_lentil_total spam2005v1r0_production_maize_irrigated spam2005v1r0_production_maize_rainfed spam2005v1r0_production_maize_total spam2005v1r0_production_oil_palm_irrigated spam2005v1r0_production_oil_palm_rainfed spam2005v1r0_production_oil_palm_total spam2005v1r0_production_other_cereals_irrigated spam2005v1r0_production_other_cereals_rainfed spam2005v1r0_production_other_cereals_total spam2005v1r0_production_other_fibers_irrigated spam2005v1r0_production_other_fibers_rainfed spam2005v1r0_production_other_fibers_total spam2005v1r0_production_other_oil_crops_irrigated spam2005v1r0_production_other_oil_crops_rainfed spam2005v1r0_production_other_oil_crops_total spam2005v1r0_production_other_pulses_irrigated spam2005v1r0_production_other_pulses_rainfed spam2005v1r0_production_other_pulses_total spam2005v1r0_production_other_roots_and_tubers_irrigated spam2005v1r0_production_other_roots_and_tubers_rainfed spam2005v1r0_production_other_roots_and_tubers_total spam2005v1r0_production_pearl_millet_irrigated spam2005v1r0_production_pearl_millet_rainfed spam2005v1r0_production_pearl_millet_total spam2005v1r0_production_pigeonpea_irrigated spam2005v1r0_production_pigeonpea_rainfed spam2005v1r0_production_pigeonpea_total spam2005v1r0_production_plantain_irrigated spam2005v1r0_production_plantain_rainfed spam2005v1r0_production_plantain_total spam2005v1r0_production_potato_irrigated spam2005v1r0_production_potato_rainfed spam2005v1r0_production_potato_total spam2005v1r0_production_rapeseed_irrigated spam2005v1r0_production_rapeseed_rainfed spam2005v1r0_production_rapeseed_total spam2005v1r0_production_rest_of_crops_irrigated spam2005v1r0_production_rest_of_crops_rainfed spam2005v1r0_production_rest_of_crops_total spam2005v1r0_production_rice_irrigated spam2005v1r0_production_rice_rainfed spam2005v1r0_production_rice_total spam2005v1r0_production_sesame_seed_irrigated spam2005v1r0_production_sesame_seed_rainfed spam2005v1r0_production_sesame_seed_total spam2005v1r0_production_small_millet_irrigated spam2005v1r0_production_small_millet_rainfed spam2005v1r0_production_small_millet_total spam2005v1r0_production_sorghum_irrigated spam2005v1r0_production_sorghum_rainfed spam2005v1r0_production_sorghum_total spam2005v1r0_production_soybean_irrigated spam2005v1r0_production_soybean_rainfed spam2005v1r0_production_soybean_total spam2005v1r0_production_sugar_beet_irrigated spam2005v1r0_production_sugar_beet_rainfed spam2005v1r0_production_sugar_beet_total spam2005v1r0_production_sugar_cane_irrigated spam2005v1r0_production_sugar_cane_rainfed spam2005v1r0_production_sugar_cane_total spam2005v1r0_production_sunflower_irrigated spam2005v1r0_production_sunflower_rainfed spam2005v1r0_production_sunflower_total spam2005v1r0_production_sweet_potato_irrigated spam2005v1r0_production_sweet_potato_rainfed spam2005v1r0_production_sweet_potato_total spam2005v1r0_production_tea_irrigated spam2005v1r0_production_tea_rainfed spam2005v1r0_production_tea_total spam2005v1r0_production_temperate_fruit_irrigated spam2005v1r0_production_temperate_fruit_rainfed spam2005v1r0_production_temperate_fruit_total spam2005v1r0_production_tobacco_irrigated spam2005v1r0_production_tobacco_rainfed spam2005v1r0_production_tobacco_total spam2005v1r0_production_tropical_fruit_irrigated spam2005v1r0_production_tropical_fruit_rainfed spam2005v1r0_production_tropical_fruit_total spam2005v1r0_production_vegetable_irrigated spam2005v1r0_production_vegetable_rainfed spam2005v1r0_production_vegetable_total spam2005v1r0_production_wheat_irrigated spam2005v1r0_production_wheat_rainfed spam2005v1r0_production_wheat_total spam2005v1r0_production_yam_irrigated spam2005v1r0_production_yam_rainfed spam2005v1r0_production_yam_total; do tar cfz $i.tgz ../../csv/production/$i.csv.gz ../../tiff/production/$i.tiff ../../png/production/$i.png ../../nc/production/$i.nc; done; 

############# fix spaces and & within the file names for pngs ###################

for f in *' '*; do mv "$f" "`echo $f | sed -e 's/ /_/g'`"; done
for f in *'&'*; do mv "$f" "`echo $f | sed -e 's/&/and/g'`"; done










